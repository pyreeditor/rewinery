@page "/{UserName}/orders"

<PageTitle>User orders</PageTitle>

@using Rewinery.Client.Shared.Components
@using Rewinery.Client.Infrastructure.HttpOrder
@using Rewinery.Shared.OrderGroup.Orders

@inject HttpOrderRepository _httpOrder

<div class="user-recipes-bg-animation" style="min-height: 100vh; height: fit-content; width: 100%;">
    <div class="row" style="--bs-gutter-x: unset; padding-bottom: 50px;">
        <div class="col-12">
            <div class="wr-pt">
                <div class="row gy-5 wr-mb" style="--bs-gutter-x: unset;">
                    @if (orders != null)
                    {
                        @foreach (var order in orders)
                        {
                            <div class="col-3">
                                <OrderCard Order="order" />
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between wr-bottom px-5 fix-bottom">
        <div class="pt-3">©  Rewinery 2022</div>
        <div class="pt-3">Powered by reeditor, nzrjed</div>
    </div>
</div>

@code {
    [Parameter]
    public string UserName { get; set; }

    public IEnumerable<OrderDto>? orders;

    protected override async Task OnInitializedAsync()
    {
        orders = await _httpOrder.GetAllByUserNameAsync(UserName);
    }
}
